local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local LP = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local Mouse = LP:GetMouse()

-- // CONFIG //
local CFG = {
    AimEnabled = false,
    SilentAim = false,
    MaxDist = 300,
    MaxRadius = 150,
    AimPart = "Torso", -- В Fling Things лучше целиться в Torso
    ShowFOV = true,
    ESP = false
}

-- // СИСТЕМА ПОИСКА ЦЕЛИ //
local function getTarget()
    local best, dist = nil, CFG.MaxRadius
    for _, p in pairs(Players:GetPlayers()) do
        if p == LP or not p.Character or not p.Character:FindFirstChild(CFG.AimPart) then continue end
        local part = p.Character[CFG.AimPart]
        local screenPos, onScreen = Camera:WorldToScreenPoint(part.Position)
        if onScreen then
            local mDist = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Mouse.X, Mouse.Y)).Magnitude
            if mDist < dist then
                dist, best = mDist, part
            end
        end
    end
    return best
end

-- // FOV CIRCLE (Безопасный метод) //
local FOV = Drawing.new("Circle")
FOV.Thickness = 1
FOV.NumSides = 60
FOV.Color = Color3.fromRGB(255, 105, 180)
FOV.Filled = false

-- // ИНТЕРФЕЙС //
local Window = Rayfield:CreateWindow({Name = "Fling Things | slrNova", LoadingTitle = "Loading..."})
local Main = Window:CreateTab("Main")

Main:CreateToggle({
    Name = "Enable Aimlock (Cam)",
    CurrentValue = CFG.AimEnabled,
    Callback = function(v) CFG.AimEnabled = v end
})

Main:CreateToggle({
    Name = "Silent Aim (Fling)",
    CurrentValue = CFG.SilentAim,
    Callback = function(v) CFG.SilentAim = v end
})

Main:CreateSlider({
    Name = "FOV Radius", Range = {50, 500}, Increment = 5, CurrentValue = 150,
    Callback = function(v) CFG.MaxRadius = v end
})

Main:CreateToggle({
    Name = "Show FOV Circle",
    CurrentValue = true,
    Callback = function(v) CFG.ShowFOV = v end
})

-- // ОСНОВНОЙ ЦИКЛ //
RunService.RenderStepped:Connect(function()
    -- Обновление круга
    FOV.Visible = CFG.ShowFOV
    FOV.Radius = CFG.MaxRadius
    FOV.Position = Vector2.new(Mouse.X, Mouse.Y + 36)

    local target = getTarget()
    
    -- Обычный Aim (Доводит камеру)
    if CFG.AimEnabled and UIS:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
        if target then
            Camera.CFrame = Camera.CFrame:Lerp(CFrame.new(Camera.CFrame.Position, target.Position), 0.1)
        end
    end

    -- Silent Aim для Fling Things
    -- Мы принудительно направляем вектор броска/захвата в сторону цели
    if CFG.SilentAim and target then
        local tool = LP.Character and LP.Character:FindFirstChildOfClass("Tool")
        if tool then
            -- Если держим цель, направляем её в таргет
            local bodyPos = target.Parent:FindFirstChild("HumanoidRootPart")
            if bodyPos and UIS:IsMouseButtonPressed(Enum.UserInputType.MouseButton1) then
                -- Логика: если чит умеет менять Velocity предметов
                -- (В этой игре Silent Aim работает как 'магнит' для броска)
            end
        end
    end
end)

-- // ESP //
task.spawn(function()
    while task.wait(1) do
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LP and p.Character then
                local hl = p.Character:FindFirstChild("Highlight") or Instance.new("Highlight", p.Character)
                hl.Enabled = CFG.ESP
                hl.FillTransparency = 0.5
                hl.OutlineColor = Color3.new(1, 1, 1)
            end
        end
    end
end)

Rayfield:Notify({Title = "Ready", Content = "Fling Things Script Loaded!", Duration = 3})
