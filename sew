local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players, RunService, UIS, WS = game:GetService("Players"), game:GetService("RunService"), game:GetService("UserInputService"), game:GetService("Workspace")
local LP, Camera, Mouse = Players.LocalPlayer, WS.CurrentCamera, Players.LocalPlayer:GetMouse()

-- // SETTINGS //
local CFG = {
    AimEnabled = true, SilentAim = false, MaxDist = 65, MaxRadius = 200, FovAngle = 70,
    AimPart = "HumanoidRootPart", ObstacleCheck = true, ShowRadius = true,
    Crosshair = true, ShowPing = true, ShowFPS = true,
    ESP = false, Names = false, ThroughWalls = true, MaxEspDist = 1000,
    Colors = {Main = Color3.fromRGB(255, 105, 180), Text = Color3.white}
}

local isAiming, fps, connections, espObjs = false, 0, {}, {}

-- // UTILS //
local function getTarget()
    local best, dist = nil, CFG.MaxRadius
    for _, p in pairs(Players:GetPlayers()) do
        if p == LP or not p.Character then continue end
        local part = p.Character:FindFirstChild(CFG.AimPart)
        local hum = p.Character:FindFirstChildOfClass("Humanoid")
        if part and hum and hum.Health > 0 then
            local screenPos, onScreen = Camera:WorldToScreenPoint(part.Position)
            if onScreen then
                local mDist = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Mouse.X, Mouse.Y)).Magnitude
                local pDist = (LP.Character.Head.Position - part.Position).Magnitude
                if mDist < dist and pDist < CFG.MaxDist then
                    if CFG.ObstacleCheck then
                        local cast = WS:Raycast(Camera.CFrame.Position, part.Position - Camera.CFrame.Position, RaycastParams.new())
                        if cast and not cast.Instance:IsDescendantOf(p.Character) then continue end
                    end
                    dist, best = mDist, part
                end
            end
        end
    end
    return best
end

-- // SILENT AIM LOGIC //
local oldNamecall
oldNamecall = hookmetamethod(game, "__namecall", function(self, ...)
    local args = {...}
    local method = getnamecallmethod()
    if CFG.SilentAim and method == "Raycast" then
        local target = getTarget()
        if target then
            args[2] = target.Position - args[1]
            return oldNamecall(self, unpack(args))
        end
    end
    return oldNamecall(self, ...)
end)

-- // UI SETUP //
local Window = Rayfield:CreateWindow({Name = "slrNova | Silent Edition", LoadingTitle = "Loading..."})
local Main = Window:CreateTab("Main")

Main:CreateSection("Aimbot & Silent")

Main:CreateToggle({
    Name = "Enable Aimlock (Cam)",
    CurrentValue = CFG.AimEnabled,
    Callback = function(v) CFG.AimEnabled = v end
})

Main:CreateToggle({
    Name = "Enable Silent Aim",
    CurrentValue = CFG.SilentAim,
    Callback = function(v) 
        CFG.SilentAim = v 
        Rayfield:Notify({Title = "Silent Aim", Content = v and "ON" or "OFF", Duration = 2})
    end
})

Main:CreateSlider({
    Name = "FOV Radius", Range = {50, 500}, Increment = 10, CurrentValue = 200,
    Callback = function(v) CFG.MaxRadius = v end
})

-- // VISUALS //
local function createDrawing(obj, props)
    local d = Drawing.new(obj)
    for k, v in pairs(props) do d[k] = v end
    return d
end

local circle = createDrawing("Circle", {Thickness = 1, NumSides = 60, Color = CFG.Colors.Main, Filled = false})

-- // MAIN LOOP //
table.insert(connections, RunService.RenderStepped:Connect(function()
    circle.Visible = CFG.ShowRadius
    circle.Radius = CFG.MaxRadius
    circle.Position = Vector2.new(Mouse.X, Mouse.Y + 36)
    
    if CFG.AimEnabled and isAiming then
        local t = getTarget()
        if t then Camera.CFrame = CFrame.new(Camera.CFrame.Position, t.Position) end
    end
end))

-- // INPUT //
UIS.InputBegan:Connect(function(i, g)
    if not g and i.UserInputType == Enum.UserInputType.MouseButton2 then isAiming = true end
end)
UIS.InputEnded:Connect(function(i)
    if i.UserInputType == Enum.UserInputType.MouseButton2 then isAiming = false end
end)

-- // ESP (Simplified) //
local function doESP()
    for _, p in pairs(Players:GetPlayers()) do
        if p == LP then continue end
        if CFG.ESP and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            if not p.Character:FindFirstChild("Highlight") then
                local h = Instance.new("Highlight", p.Character)
                h.FillTransparency = 0.5
                h.OutlineColor = CFG.Colors.Main
            end
        elseif p.Character and p.Character:FindFirstChild("Highlight") then
            p.Character.Highlight:Destroy()
        end
    end
end

task.spawn(function()
    while task.wait(1) do doESP() end
end)

Rayfield:Notify({Title = "Loaded", Content = "slrNova Silent Aim Ready", Duration = 3})
